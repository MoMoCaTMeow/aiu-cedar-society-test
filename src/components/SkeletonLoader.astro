---
/**
 * SkeletonLoader - CSS-only skeleton loading component
 * Provides shimmer effect without JavaScript for better performance
 */
interface Props {
  width?: string;
  height?: string;
  className?: string;
  variant?: 'text' | 'image' | 'card';
}

const { 
  width = '100%', 
  height = '1rem', 
  className = '',
  variant = 'text'
} = Astro.props;

const variantClasses = {
  text: 'skeleton-text',
  image: 'skeleton-image',
  card: 'skeleton-card',
};
---

<div 
  class={`skeleton ${variantClasses[variant]} ${className}`}
  style={`width: ${width}; height: ${height};`}
  aria-label="読み込み中..."
  role="status"
></div>

<style>
  .skeleton {
    background: linear-gradient(
      90deg,
      #f0f0f0 25%,
      #e0e0e0 50%,
      #f0f0f0 75%
    );
    background-size: 1000px 100%;
    animation: shimmer 2s infinite linear;
    border-radius: 4px;
    display: block;
  }

  .skeleton-text {
    border-radius: 4px;
  }

  .skeleton-image {
    border-radius: 8px;
    aspect-ratio: 16 / 9;
  }

  .skeleton-card {
    border-radius: 12px;
    padding: 1.5rem;
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  @keyframes shimmer {
    0% {
      background-position: -1000px 0;
    }
    100% {
      background-position: 1000px 0;
    }
  }

  /* Dark mode support */
  @media (prefers-color-scheme: dark) {
    .skeleton {
      background: linear-gradient(
        90deg,
        #2a2a2a 25%,
        #1a1a1a 50%,
        #2a2a2a 75%
      );
      background-size: 1000px 100%;
    }
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    .skeleton {
      animation: none;
      background: #f0f0f0;
    }
    
    @media (prefers-color-scheme: dark) {
      .skeleton {
        background: #2a2a2a;
      }
    }
  }
</style>
